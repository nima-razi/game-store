<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ed2026">
    <meta name="apple-mobile-web-app-status-bar-style" content="#ed2026">
    <title>Generic gamesite - HOME</title>
    <link rel="shortcut icon" href="assets/images/favicon.ico" type="image/x-icon" />
    <link rel="mask-icon" href="assets/images/favicon.ico" color="#ed2026">
    <link rel="apple-touch-icon" href="assets/images/favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
</head>
<body>
    <div id="nav"></div>

    <div class="container-fluid mt-5">
        <div class="row" id="game-list"></div>
    </div>

    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
            <li class="page-item disabled">
                <a class="page-link">Previous</a>
            </li>
            <li class="page-item"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item">
                <a class="page-link" href="#">Next</a>
            </li>
        </ul>
    </nav>

    <div id="footer"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.min.js" integrity="sha384-RuyvpeZCxMJCqVUGFI0Do1mQrods/hhxYlcVfGPOfQtPJh0JCw12tUAZ/Mv10S7D" crossorigin="anonymous"></script>
    <script src="js/script.js"></script>
    <script>
        const gamesPerPage = 12;
        let currentPage = 1;
        let gamesData = [];

        function renderGames() {
            const container = document.getElementById('game-list');
            container.innerHTML = '';

            const startIndex = (currentPage - 1) * gamesPerPage;
            const endIndex = startIndex + gamesPerPage;
            const currentGames = gamesData.slice(startIndex, endIndex);

            currentGames.forEach(game => {
                const platformBadges = Array.isArray(game.platforms)
                    ? game.platforms.map(p => `<span class="badge bg-secondary">${p}</span>`).join(' ')
                    : `<span class="badge bg-secondary">${game.platforms}</span>`;

                const html = `
                    <div class="col-6 col-xl-2 col-lg-3 col-md-4 mb-4">
                        <div class="card h-100 shadow">
                            <img src="${game.image}" class="card-img-top" alt="${game.title}">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title"><a href="videogames.html?id=${game.id}">${game.title}</a></h5>
                                <h3><strong>${game.price}</strong></h3>
                                <div class="mt-auto d-flex flex-wrap gap-1">${platformBadges}</div>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        function setupPagination(totalGames) {
            const totalPages = Math.ceil(totalGames / gamesPerPage);
            const pagination = document.querySelector('.pagination');
            pagination.innerHTML = '';

            const prevClass = currentPage === 1 ? 'disabled' : '';
            const nextClass = currentPage === totalPages ? 'disabled' : '';

            pagination.innerHTML += `
                <li class="page-item ${prevClass}">
                    <a class="page-link" href="#" data-page="${currentPage - 1}">Previous</a>
                </li>
            `;

            for (let i = 1; i <= totalPages; i++) {
                const active = i === currentPage ? 'active' : '';
                pagination.innerHTML += `
                    <li class="page-item ${active}">
                        <a class="page-link" href="#" data-page="${i}">${i}</a>
                    </li>
                `;
            }

            pagination.innerHTML += `
                <li class="page-item ${nextClass}">
                    <a class="page-link" href="#" data-page="${currentPage + 1}">Next</a>
                </li>
            `;

            document.querySelectorAll('.page-link').forEach(link => {
                link.addEventListener('click', e => {
                    e.preventDefault();
                    const targetPage = parseInt(e.target.dataset.page);
                    if (!isNaN(targetPage) && targetPage >= 1 && targetPage <= totalPages) {
                        currentPage = targetPage;
                        renderGames();
                        setupPagination(totalGames);
                    }
                });
            });
        }

        fetch('data/games.json')
            .then(response => response.json())
            .then(data => {
                gamesData = data;
                renderGames();
                setupPagination(gamesData.length);
            });
    </script>

</body>
</html>